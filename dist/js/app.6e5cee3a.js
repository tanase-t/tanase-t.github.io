(function(e){function t(t){for(var a,s,o=t[0],i=t[1],u=t[2],p=0,b=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);l&&l(t);while(b.length)b.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var i=n[o];0!==c[i]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},c={app:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0954":function(e,t,n){"use strict";var a=n("b003"),c=n.n(a);c.a},"1c6a":function(e,t,n){},4203:function(e,t,n){e.exports=n.p+"img/drink_nodo_kawaita_man.f76fe84f.png"},"46f0":function(e,t,n){"use strict";var a=n("53a1"),c=n.n(a);c.a},"4c86":function(e,t,n){"use strict";var a=n("edf3"),c=n.n(a);c.a},5293:function(e,t,n){"use strict";var a=n("fb1f"),c=n.n(a);c.a},"53a1":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a,c,r,s,o,i,u,l,p,b,f,d,h,j,v,O,g,m,y,k,w,_,C,x,P,M,E,S,V,T,$,z,A,D,F,N,I,J,U,q,B,X,G,H,K,L,Q,R,W,Y,Z,ee,te,ne,ae,ce,re,se=n("2b0e"),oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-row p-4",attrs:{id:"app"}},[n("VendingMachine",{attrs:{products:e.displayProducts,sales:e.sales,stock:e.changeStock,inputs:e.inputs},on:{eject:e.onEject,purchased:e.onPurchased}}),n("UserStatus",{staticClass:"ml-2",attrs:{message:e.message,products:e.products,inputs:e.inputs},on:{changeInputs:e.onChangeValue,purchased:e.onPurchased}})],1)},ie=[],ue=(n("99af"),n("7db0"),n("d81d"),n("b0c0"),n("5530")),le=n("d4ec"),pe=n("bee2"),be=n("257e"),fe=n("262e"),de=n("2caf"),he=n("ade3"),je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"border border-secondary d-flex flex-column p-4 mt-2 w-75"},[n("h2",{staticClass:"border boder-secondary p-2 text-center w-50 align-self-center"},[e._v("自動販売機")]),n("Products",{staticClass:"m-4",attrs:{products:e.products},on:{purchased:e.onPurchased}}),n("div",{staticClass:"d-flex justify-content-between mx-4"},[n("VendingMachineStock",{attrs:{sales:e.sales,stock:e.stock}}),n("div",{staticClass:"d-flex flex-column"},[n("CashDisplay",{attrs:{inputs:e.inputs}}),n("button",{staticClass:"btn-primary align-self-end p-2 rounded",on:{click:e.onClickEject}},[e._v("払い出し")])],1)],1),n("div",{staticClass:"outlet bg-dark align-self-center m-4 w-50"})],1)},ve=[],Oe=(n("e439"),n("6b7b")),ge=n("63ae"),me=(n("f890"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-right"},[n("h1",[e._v("💰"+e._s(e.sum))])])}),ye=[],ke=n("60a3"),we=(n("c975"),n("13d5"),n("caad"),[1,10,50,100,500,1e3,5e3,1e4]),_e=[10,50,100,500,1e3],Ce=function(){return we.map((function(e){return{value:e,count:0}}))},xe=function(e){return _e.includes(e)},Pe=function(e){switch(e){case 1e4:return"1万円札";case 5e3:return"5千円札";case 1e3:return"千円札";case 500:return"500円玉";case 100:return"100円玉";case 50:return"50円玉";case 10:return"10円玉";case 1:return"1円玉"}},Me=function(e){return e.reduce((function(e,t){return e+t.value*t.count}),0)},Ee=function(e){var t=_e.sort((function(e,t){return t-e})),n=t.indexOf(e);return t[n+1]||null},Se=function(e,t){var n=_e.map((function(e){return{value:e,count:0}})),a=function n(a,c){var r=Me(c),s=e-r,o=Math.floor(s/a),i=c.find((function(e){return e.value===a})),u=t.find((function(e){return e.value===a}));i.count=o;var l=Me(c);return l===e&&o<=u.count?{matched:!0,change:c}:10===a?{matched:!1,change:null}:(i.count=Math.min(o,u.count),n(Ee(a),c))},c=a(1e3,n),r=c.matched,s=c.change;return console.info(r,s),{result:s,error:!r}},Ve=(a=Object(ke["a"])({}),c=Object(ke["c"])(),a((i=function(e){Object(fe["a"])(n,e);var t=Object(de["a"])(n);function n(){var e;Object(le["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(Oe["a"])(Object(be["a"])(e),"inputs",o,Object(be["a"])(e)),e}return Object(pe["a"])(n,[{key:"sum",get:function(){return Me(this.inputs)}}]),n}(ke["d"]),s=i,o=Object(ge["a"])(s.prototype,"inputs",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=s))||r),Te=Ve,$e=n("2877"),ze=Object($e["a"])(Te,me,ye,!1,null,"9197e9fa",null),Ae=ze.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-wrap w-80 justify-content-center border"},e._l(e.products,(function(t){return n("div",{key:t.name,staticClass:"position-relative"},[0===t.stock?n("div",{staticClass:"position-absolute h-100 w-100 text-danger",on:{click:function(n){return e.purchased(t)}}},[n("b-icon-X",{attrs:{width:"100%",height:"100%"}})],1):e._e(),t.available?n("div",{staticClass:"avaulable position-absolute h-100 w-100 border border-info",on:{click:function(n){return e.purchased(t)}}}):e._e(),n("div",{class:"d-flex flex-column justify-content-center text-center product "+(t.stock<=0&&"disable"),attrs:{role:"button"},on:{click:function(n){return e.purchased(t)}}},[n("h1",[n("b-icon-trash2-fill")],1),n("div",{staticClass:"info"},[n("p",{staticClass:"mb-0"},[e._v(e._s(t.name))]),n("p",{staticClass:"mb-0"},[e._v(e._s(t.price)+"円")]),n("p",{staticClass:"mb-0"},[e._v("残: "+e._s(t.stock)+"個")])])])])})),0)},Fe=[],Ne=(u=Object(ke["a"])({}),l=Object(ke["c"])(),u((d=function(e){Object(fe["a"])(n,e);var t=Object(de["a"])(n);function n(){var e;Object(le["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(Oe["a"])(Object(be["a"])(e),"products",f,Object(be["a"])(e)),e}return Object(pe["a"])(n,[{key:"purchased",value:function(e){this.$emit("purchased",e)}}]),n}(ke["d"]),b=d,f=Object(ge["a"])(b.prototype,"products",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=b))||p),Ie=Ne,Je=(n("5293"),Object($e["a"])(Ie,De,Fe,!1,null,"7b3c4f20",null)),Ue=Je.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-root d-flex flex-column justify-content-center align-items-end mt-2",on:{click:function(t){e.showPriceMenu=!1}}},[n("div",{staticClass:"menu"},[n("h6",{staticClass:"title"},[e._v("どうする?")]),n("ul",[n("li",{staticClass:"position-relative",on:{click:function(t){t.stopPropagation(),e.showPriceMenu=!e.showPriceMenu,e.showProductsMenu=!1}}},[e._v("お金を入れる "),e.showPriceMenu?n("div",{staticClass:"menu stage-2"},[n("h6",{staticClass:"title"},[e._v("どれを？")]),n("ul",e._l(e.coins,(function(t){return n("li",{key:t,on:{click:function(n){return n.stopPropagation(),e.add(t)}}},[e._v(e._s(t)+"円")])})),0)]):e._e()]),n("li",{staticClass:"position-relative",on:{click:function(t){t.stopPropagation(),e.showProductsMenu=!e.showProductsMenu,e.showPriceMenu=!1}}},[e._v("買う "),e.showProductsMenu?n("div",{staticClass:"menu stage-2"},[n("h6",{staticClass:"title"},[e._v("どれを？")]),n("ul",e._l(e.products,(function(t){return n("li",{key:t.name,on:{click:function(n){return n.stopPropagation(),e.purchase(t)}}},[e._v(e._s(t.name))])})),0)]):e._e()]),n("li",{staticClass:"disabled"},[e._v("飲む")])])])])},Be=[],Xe=(h=Object(ke["a"])({}),j=Object(ke["c"])(),v=Object(ke["c"])(),h((k=function(e){Object(fe["a"])(n,e);var t=Object(de["a"])(n);function n(){var e;Object(le["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(Oe["a"])(Object(be["a"])(e),"value",m,Object(be["a"])(e)),Object(Oe["a"])(Object(be["a"])(e),"products",y,Object(be["a"])(e)),Object(he["a"])(Object(be["a"])(e),"showPriceMenu",!1),Object(he["a"])(Object(be["a"])(e),"showProductsMenu",!1),e}return Object(pe["a"])(n,[{key:"add",value:function(e){this.$emit("input",e)}},{key:"purchase",value:function(e){this.$emit("purchased",e)}},{key:"coins",get:function(){return we}}]),n}(ke["d"]),g=k,m=Object(ge["a"])(g.prototype,"value",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=Object(ge["a"])(g.prototype,"products",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=g))||O),Ge=Xe,He=(n("46f0"),Object($e["a"])(Ge,qe,Be,!1,null,"83d5cd28",null)),Ke=He.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-small border p-3"},[n("p",{staticClass:"align-self-start"},[e._v("売上: "+e._s(e.sales)+"円")]),n("ul",{staticClass:"mt-1"},e._l(e.stock,(function(t){return n("li",{key:"stock_"+t.value,class:e.stockClass(t.value)},[n("span",[e._v(e._s(t.value)+"円")]),e._v(": "+e._s(t.count)+"枚")])})),0)])},Qe=[],Re=(w=Object(ke["a"])(),_=Object(ke["c"])(),C=Object(ke["c"])(),w((S=function(e){Object(fe["a"])(n,e);var t=Object(de["a"])(n);function n(){var e;Object(le["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(Oe["a"])(Object(be["a"])(e),"stock",M,Object(be["a"])(e)),Object(Oe["a"])(Object(be["a"])(e),"sales",E,Object(be["a"])(e)),e}return Object(pe["a"])(n,[{key:"stockClass",value:function(e){var t="mr-4",n=this.stock.find((function(t){return t.value===e}));return"".concat(t," ").concat(n&&0===n.count?"text-danger":"")}}]),n}(ke["d"]),P=S,M=Object(ge["a"])(P.prototype,"stock",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=Object(ge["a"])(P.prototype,"sales",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=P))||x),We=Re,Ye=(n("4c86"),Object($e["a"])(We,Le,Qe,!1,null,"26b43a1f",null)),Ze=Ye.exports,et=(V=Object(ke["a"])({components:{CashDisplay:Ae,Products:Ue,Form:Ke,VendingMachineStock:Ze}}),T=Object(ke["c"])(),$=Object(ke["c"])(),z=Object(ke["c"])(),A=Object(ke["c"])(),D=Object(ke["b"])("input"),F=Object(ke["b"])("eject"),N=Object(ke["b"])("purchased"),V((G=function(e){Object(fe["a"])(n,e);var t=Object(de["a"])(n);function n(){var e;Object(le["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(Oe["a"])(Object(be["a"])(e),"inputs",U,Object(be["a"])(e)),Object(Oe["a"])(Object(be["a"])(e),"sales",q,Object(be["a"])(e)),Object(Oe["a"])(Object(be["a"])(e),"products",B,Object(be["a"])(e)),Object(Oe["a"])(Object(be["a"])(e),"stock",X,Object(be["a"])(e)),e}return Object(pe["a"])(n,[{key:"onChangeValue",value:function(e){return e}},{key:"onClickEject",value:function(){return this.inputs}},{key:"onPurchased",value:function(e){return e}}]),n}(ke["d"]),J=G,U=Object(ge["a"])(J.prototype,"inputs",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=Object(ge["a"])(J.prototype,"sales",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=Object(ge["a"])(J.prototype,"products",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(ge["a"])(J.prototype,"stock",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ge["a"])(J.prototype,"onChangeValue",[D],Object.getOwnPropertyDescriptor(J.prototype,"onChangeValue"),J.prototype),Object(ge["a"])(J.prototype,"onClickEject",[F],Object.getOwnPropertyDescriptor(J.prototype,"onClickEject"),J.prototype),Object(ge["a"])(J.prototype,"onPurchased",[N],Object.getOwnPropertyDescriptor(J.prototype,"onPurchased"),J.prototype),I=J))||I),tt=et,nt=(n("e715"),Object($e["a"])(tt,je,ve,!1,null,"1494d613",null)),at=nt.exports,ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column justify-content-center"},[n("Form",{attrs:{value:e.inputs,products:e.products},on:{input:e.onChangeValue,purchased:e.purchased}}),e._m(0),n("div",{staticClass:"message-logs p-2 align-self-end w-100"},[e.logTextVisible?n("p",{class:e.messageClass},[e._v(" "+e._s(e.message.text))]):e._e()])],1)},rt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-25 align-self-end"},[a("img",{staticClass:"h-100",attrs:{src:n("4203")}})])}],st=(H=Object(ke["a"])({components:{Form:Ke}}),K=Object(ke["c"])(),L=Object(ke["c"])(),Q=Object(ke["c"])(),R=Object(ke["e"])("message.text"),H((ne=function(e){Object(fe["a"])(n,e);var t=Object(de["a"])(n);function n(){var e;Object(le["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(Oe["a"])(Object(be["a"])(e),"inputs",Z,Object(be["a"])(e)),Object(Oe["a"])(Object(be["a"])(e),"message",ee,Object(be["a"])(e)),Object(Oe["a"])(Object(be["a"])(e),"products",te,Object(be["a"])(e)),Object(he["a"])(Object(be["a"])(e),"logTextVisible",!0),Object(he["a"])(Object(be["a"])(e),"changeTimer",null),e}return Object(pe["a"])(n,[{key:"onChangeValue",value:function(e){this.$emit("changeInputs",e)}},{key:"purchased",value:function(e){this.$emit("purchased",e)}},{key:"onChangeMessage",value:function(){var e=this;clearTimeout(this.changeTimer),this.changeTimer=this.logTextVisible=!1,window.setTimeout((function(){clearTimeout(e.changeTimer),e.logTextVisible=!0}),1)}},{key:"messageClass",get:function(){var e="message-log";return"error"==this.message.type?"".concat(e," text-danger"):"".concat(e)}}]),n}(ke["d"]),Y=ne,Z=Object(ge["a"])(Y.prototype,"inputs",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=Object(ge["a"])(Y.prototype,"message",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=Object(ge["a"])(Y.prototype,"products",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ge["a"])(Y.prototype,"onChangeMessage",[R],Object.getOwnPropertyDescriptor(Y.prototype,"onChangeMessage"),Y.prototype),W=Y))||W),ot=st,it=(n("0954"),Object($e["a"])(ot,ct,rt,!1,null,"3d1d2c25",null)),ut=it.exports,lt=[{name:"レッドブル",price:200,stock:5},{name:"爽健美茶",price:110,stock:5},{name:"烏龍茶",price:100,stock:5},{name:"Monster Energy",price:210,stock:5},{name:"カルピスソーダ",price:130,stock:5},{name:"コーラ",price:140,stock:5},{name:"青汁",price:120,stock:5},{name:"天然水",price:100,stock:5}],pt=lt,bt=(ae=Object(ke["a"])({components:{VendingMachine:at,UserStatus:ut}}),ae((re=function(e){Object(fe["a"])(n,e);var t=Object(de["a"])(n);function n(){var e;Object(le["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(he["a"])(Object(be["a"])(e),"message",{type:"normal",text:"自動販売機がある"}),Object(he["a"])(Object(be["a"])(e),"inputs",Ce()),Object(he["a"])(Object(be["a"])(e),"changeStock",[{value:10,count:10},{value:50,count:10},{value:100,count:10},{value:500,count:10},{value:1e3,count:5}]),Object(he["a"])(Object(be["a"])(e),"products",pt),Object(he["a"])(Object(be["a"])(e),"sales",0),Object(he["a"])(Object(be["a"])(e),"change",null),e}return Object(pe["a"])(n,[{key:"onChangeValue",value:function(e){if(this.message={type:"normal",text:""},xe(e)){var t=this.inputs.find((function(t){return t.value===e}));t.count+=1;var n=Pe(e);this.message={type:"normal",text:"".concat(n," を入れた。合計").concat(this.sum,"円")}}else this.message={type:"error",text:"そのお金は使えないようだ"}}},{key:"onEject",value:function(){this.change=Me(this.inputs),this.inputs=Ce(),this.message={type:"normal",text:"".concat(this.change,"円払い出した")}}},{key:"onPurchased",value:function(e){var t=this;if(0!==e.stock)if(e.price>this.sum)this.message={type:"error",text:"お金が足らない！"};else{var n=this.sum-e.price,a=this.changeStock.map((function(e){var n=t.inputs.find((function(t){return t.value===e.value}));return{value:e.value,count:n.count+e.count}})),c=Se(n,a),r=c.result,s=c.error;s?this.message={type:"error",text:"釣り銭不足のため購入できなかった"}:(this.change=Me(r),this.inputs=Ce(),this.changeStock=a.map((function(e){var t=r.find((function(t){return t.value===e.value}));return{value:e.value,count:e.count-t.count}})),console.info(this.changeStock),e.stock-=1,this.sales+=e.price,this.message={type:"normal",text:"".concat(e.name,"を手に入れた! お釣り:").concat(this.change,"円")})}else this.message={type:"error",text:"".concat(e.name,"は売り切れている")}}},{key:"displayProducts",get:function(){var e=this;return this.products.map((function(t){var n=e.sum-t.price,a=e.changeStock.map((function(t){var n=e.inputs.find((function(e){return e.value===t.value}));return{value:t.value,count:n.count+t.count}})),c=Se(n,a),r=c.error,s=!1===r;return Object(ue["a"])(Object(ue["a"])({},t),{},{available:s&&e.sum>=t.price})}))}},{key:"sum",get:function(){return Me(this.inputs)}}]),n}(ke["d"]),ce=re))||ce),ft=bt,dt=Object($e["a"])(ft,oe,ie,!1,null,null,null),ht=dt.exports,jt=(n("f9e3"),n("2dd8"),n("5df9"),n("5f5b")),vt=n("b1e0"),Ot=n("9483");Object(Ot["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),se["default"].use(jt["a"]),se["default"].use(vt["a"]),se["default"].config.productionTip=!1,new se["default"]({render:function(e){return e(ht)}}).$mount("#app")},b003:function(e,t,n){},e715:function(e,t,n){"use strict";var a=n("1c6a"),c=n.n(a);c.a},edf3:function(e,t,n){},fb1f:function(e,t,n){}});
//# sourceMappingURL=app.6e5cee3a.js.map